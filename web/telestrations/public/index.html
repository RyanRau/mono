<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>Telestrations</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <!-- Landing -->
    <div id="screen-landing" class="screen active">
      <div class="card landing-card">
        <h1 class="logo">Telestrations</h1>
        <p class="subtitle">Draw, guess, laugh.</p>
        <input
          id="name-input"
          type="text"
          placeholder="Your name"
          maxlength="20"
          autocomplete="off"
        />
        <div id="error-msg" class="error" hidden></div>
        <button id="btn-create" class="btn btn-primary">Create Lobby</button>
        <button id="btn-join" class="btn btn-secondary" hidden>Join Lobby</button>
        <p id="status-msg" class="status-text"></p>
        <div class="divider"><span>or</span></div>
        <button id="btn-sandbox" class="btn btn-secondary">Just Draw</button>
      </div>
    </div>

    <!-- Lobby -->
    <div id="screen-lobby" class="screen">
      <div class="card">
        <h2>Lobby</h2>
        <ul id="player-list" class="player-list"></ul>
        <p id="lobby-count" class="text-muted"></p>
        <button id="btn-start" class="btn btn-primary" hidden>Start Game</button>
        <p id="lobby-wait" class="text-muted">Waiting for host to start&hellip;</p>
      </div>
    </div>

    <!-- Write -->
    <div id="screen-write" class="screen">
      <div class="card">
        <div class="round-badge" id="write-round-badge"></div>
        <h2 id="write-heading">Write a word or phrase</h2>
        <input
          id="word-input"
          type="text"
          placeholder="e.g. a cat riding a skateboard"
          maxlength="100"
          autocomplete="off"
        />
        <button id="btn-submit-word" class="btn btn-primary">Submit</button>
      </div>
    </div>

    <!-- Draw -->
    <div id="screen-draw" class="screen">
      <div class="draw-layout">
        <div class="draw-header">
          <span class="round-badge" id="draw-round-badge"></span>
          <span id="draw-word" class="draw-header-word"></span>
        </div>
        <div class="canvas-wrap">
          <canvas id="draw-canvas"></canvas>
        </div>
        <button class="fab-submit" id="btn-submit-drawing">Done</button>
        <div class="fab-menu" id="fab-menu">
          <div class="fab-options">
            <button class="fab-opt" id="btn-clear">
              <svg
                viewBox="0 0 24 24"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="3 6 5 6 21 6" />
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                />
              </svg>
            </button>
            <button class="fab-opt" id="btn-undo">
              <svg
                viewBox="0 0 24 24"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="1 4 1 10 7 10" />
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
              </svg>
            </button>
            <button class="fab-opt" id="btn-eraser">
              <svg
                viewBox="0 0 24 24"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"
                />
                <path d="M22 21H7" />
                <path d="m5 11 9 9" />
              </svg>
            </button>
            <button class="fab-opt" id="btn-pen">
              <span class="pen-icon" id="pen-color-dot"></span>
            </button>
          </div>
          <button class="fab-toggle" id="fab-toggle">
            <svg
              viewBox="0 0 24 24"
              width="24"
              height="24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
              <path d="m15 5 4 4" />
            </svg>
          </button>
        </div>
        <div id="pen-popup" class="pen-popup" hidden>
          <div class="pen-popup-inner">
            <p class="pen-popup-label">Color</p>
            <div class="color-row" id="color-picker"></div>
            <p class="pen-popup-label">Size</p>
            <div class="size-row">
              <button class="size-btn" data-size="3"><span class="dot dot-sm"></span></button>
              <button class="size-btn active" data-size="6">
                <span class="dot dot-md"></span>
              </button>
              <button class="size-btn" data-size="12"><span class="dot dot-lg"></span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Guess -->
    <div id="screen-guess" class="screen">
      <div class="card">
        <div class="round-badge" id="guess-round-badge"></div>
        <p class="draw-prompt">What is this?</p>
        <div class="reveal-img-wrap">
          <img id="guess-image" class="reveal-img" alt="drawing to guess" />
        </div>
        <input
          id="guess-input"
          type="text"
          placeholder="Your guess"
          maxlength="100"
          autocomplete="off"
        />
        <button id="btn-submit-guess" class="btn btn-primary">Submit Guess</button>
      </div>
    </div>

    <!-- Waiting -->
    <div id="screen-waiting" class="screen">
      <div class="card center-card">
        <div class="spinner"></div>
        <p class="waiting-text">Waiting for other players&hellip;</p>
        <p id="progress-text" class="text-muted"></p>
      </div>
    </div>

    <!-- Reveal -->
    <div id="screen-reveal" class="screen">
      <!-- Live chain viewer (host-controlled) / Browse viewer -->
      <div class="card reveal-card" id="reveal-card">
        <h2 id="reveal-title"></h2>
        <div id="reveal-entry" class="reveal-entry"></div>
        <p id="reveal-author" class="text-muted"></p>
        <div class="reveal-nav" id="reveal-nav">
          <button id="btn-reveal-prev" class="btn btn-secondary btn-sm">Back</button>
          <span id="reveal-counter" class="text-muted"></span>
          <button id="btn-reveal-next" class="btn btn-primary btn-sm">Next</button>
        </div>
        <p id="reveal-host-msg" class="text-muted" hidden>Host is presenting&hellip;</p>
        <button id="btn-back-to-summary" class="btn btn-secondary btn-sm" hidden>All Chains</button>
      </div>

      <!-- Summary table (shown after host finishes all chains) -->
      <div class="card reveal-summary" id="reveal-summary" hidden>
        <h2>All Chains</h2>
        <div id="chain-list" class="chain-list"></div>
        <button id="btn-play-again" class="btn btn-primary" hidden>Play Again</button>
        <p id="reveal-wait" class="text-muted" hidden>Waiting for host&hellip;</p>
      </div>
    </div>

    <!-- Sandbox (draw only) -->
    <div id="screen-sandbox" class="screen">
      <div class="draw-layout">
        <div class="draw-header">
          <button id="btn-sandbox-back" class="header-back">Back</button>
          <span class="draw-header-word">Free Draw</span>
        </div>
        <div class="canvas-wrap">
          <canvas id="sandbox-canvas"></canvas>
        </div>
        <div class="fab-menu" id="sbx-fab-menu">
          <div class="fab-options">
            <button class="fab-opt" id="sbx-btn-clear">
              <svg
                viewBox="0 0 24 24"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="3 6 5 6 21 6" />
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                />
              </svg>
            </button>
            <button class="fab-opt" id="sbx-btn-undo">
              <svg
                viewBox="0 0 24 24"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="1 4 1 10 7 10" />
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
              </svg>
            </button>
            <button class="fab-opt" id="sbx-btn-eraser">
              <svg
                viewBox="0 0 24 24"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"
                />
                <path d="M22 21H7" />
                <path d="m5 11 9 9" />
              </svg>
            </button>
            <button class="fab-opt" id="sbx-btn-pen">
              <span class="pen-icon" id="sbx-pen-color-dot"></span>
            </button>
          </div>
          <button class="fab-toggle" id="sbx-fab-toggle">
            <svg
              viewBox="0 0 24 24"
              width="24"
              height="24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
              <path d="m15 5 4 4" />
            </svg>
          </button>
        </div>
        <div id="sbx-pen-popup" class="pen-popup" hidden>
          <div class="pen-popup-inner">
            <p class="pen-popup-label">Color</p>
            <div class="color-row" id="sbx-color-picker"></div>
            <p class="pen-popup-label">Size</p>
            <div class="size-row">
              <button class="size-btn" data-size="3"><span class="dot dot-sm"></span></button>
              <button class="size-btn active" data-size="6">
                <span class="dot dot-md"></span>
              </button>
              <button class="size-btn" data-size="12"><span class="dot dot-lg"></span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" hidden></div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
